### PUBLISH
publish_snapshot:
  stage: publish
  script:
    - echo "$(echo -ne $CI_COMMIT_REF_NAME | cut -d"-" -f2)-SNAPSHOT" > .dev-version || exit 1
    - sh gradlew publish
  environment:
    name: development
  only:
    - /^release-.*$/
  when: on_success


## only tags
# publish to gitlab before release to distibutor
publish_release:
  stage: publish
  script:
    - echo "${CI_COMMIT_TAG}" > .dev-version || exit 1
    - sh gradlew publish
  environment:
    name: production
  only:
    - tags
  when: on_success
